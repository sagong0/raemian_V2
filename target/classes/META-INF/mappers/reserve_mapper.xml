<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" 
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="raemian.common.mapper.ReserveMapper">
	<select id="findReserves" parameterType="raemian.common.dto.SearchDto" resultType="raemian.client.domain.Reserve">
    SELECT * FROM reservation
    <where>
        <if test="searchVal != null">
            <choose>
                <when test="searchType == '아이디'">
                    AND rid like concat('%',#{searchVal},'%')
                </when>
                <when test="searchType == '이름'">
                    AND rname like concat('%',#{searchVal},'%')
                </when>
                <when test="searchType == '연락처'">
                    AND rtel like concat('%',#{searchVal},'%')
                </when>
            </choose>
        </if>
    </where>
	</select>

	<delete id="cancelReserve">
	DELETE FROM reservation
	WHERE ridx=#{ridx}
	</delete>


</mapper>